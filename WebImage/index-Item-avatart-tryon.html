<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8">
		<!-- 
			幅:1080に固定する
			ほかにいいアイデアったらお願いします。
		-->
		<meta name="viewport" content="width=1080,initial-scale=1">
		<title>tshirt</title>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-LZY8EZF1JB"></script>
		<script>
				window.dataLayer = window.dataLayer || [];
				function gtag(){dataLayer.push(arguments);}
				gtag('js', new Date());

				gtag('config', 'G-LZY8EZF1JB');
		</script>

		<!-- ********************************* -->
		<!-- CSS をキャッシュが効く読み込み方。 -->
		<!-- Index.html -->
		<link rel="stylesheet" href="css/styles.css" type="text/css">
		<link rel="stylesheet" href="css/select_item.css" type="text/css">
		<link rel="stylesheet" href="css/accordion_check.css" type="text/css">
		<link rel="stylesheet" href="css/accordion_radio.css" type="text/css">
		<!-- Camera.html -->
		<link rel="stylesheet" href="css/camara.css" type="text/css">
		<link rel="stylesheet" href="css/talkstyle.css" type="text/css">
		<!-- Order.html -->
		<link rel="stylesheet" href="css/order.css" type="text/css">
		<!-- Privacy -->
		<link rel="stylesheet" href="css/privacy.css" type="text/css">
		<!-- item create -->
		<link rel="stylesheet" href="css/item_create.css" type="text/css">
		<!-- CSS をキャッシュさせない読み込み方。 -->
		<script>
			document.write(
				// <!-- Index.html -->
				// '<link rel="stylesheet" href="css/styles.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// '<link rel="stylesheet" href="css/select_item.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// '<link rel="stylesheet" href="css/accordion_check.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// '<link rel="stylesheet" href="css/accordion_radio.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// <!-- Camera.html -->
				// '<link rel="stylesheet" href="css/camara.css?' + new Date().getTime() + '" type="text/css">' + "\n" +
				// '<link rel="stylesheet" href="css/talkstyle.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// <!-- Order.html -->
				// '<link rel="stylesheet" href="css/order.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
				// <!-- Privacy -->
				// '<link rel="stylesheet" href="css/privacy.css?' + new Date().getTime() +'" type="text/css">' + "\n" +
        // <!-- item create -->
				// '<link rel="stylesheet" href="css/item_create.css?' + new Date().getTime() +'" type="text/css">' + "\n"
			);
		</script>
  </head>
  <body>

		<!-- ******************************************************************************* -->
		<!-- index.html -->
		<!-- ******************************************************************************* -->
		<!-- index-loading画面 -->
    <div id="index-loading" class="">
			<p style="font-size: 25px; color:red">GITHUB GoogleAnalytics</p>
			<!-- カメラ -->
			<div class="footer-container_loading_camera">
				<img class="" id="accept_privacy_camera" src="img/logos/button_loading_camera.webp">
				<!-- <img class="fluffy_slime item-hide" id="accept_privacy_camera" src="img/logos/button_loading_camera.webp"> -->
			</div>
			<!-- レシート -->
			<div class="footer-container_loading_receipt">
				<img class="" id="accept_privacy_receipt" src="img/logos/button_loading_receipt.webp">
				<!-- <img class="fluffy_slime item-hide" id="accept_privacy_receipt" src="img/logos/button_loading_receipt.webp"> -->
			</div>
			<!-- 同意してスタート -->
			<div class="footer-container_loading_start">
				<img class="" src="img/logos/button_loading_start.webp" id="accept_privacy_button" onclick="accept_privacy_and_start()">
			</div>
			<!-- プライバシー遷移 -->
			<div class="footer-container_loading_privacy">
				<img src="img/logos/button_loading_privacy.webp" id="accept_privacy_button" onclick="jumpto_privacy()">
			</div>
			<!-- 終了 -->
			<div class="footer-container_loading_cancel">
				<img class="" src="img/logos/button_loading_cancel.webp" id="cancel_privacy_button" onclick="endproc_order()">
			</div>
		</div>
		<!-- プライバシーポリシー -->
		<div id="privacypolicy_page" class="loaded">
			<div class="privacy-container" id="privacy_scroll_area">
				<!-- <p>【原文】https://about.formatech.com/privacy-policy.html</p> -->
				<p class="privacy_header">Formaプライバシーポリシー</p>
				<p class="privacy_header_date">発効日：2018年7月30日</p>
				
				<p class="privacy_p">Forma（「当社）はあなたのプライバシーを尊重します。このプライバシーポリシー（「ポリシー」）では、当社のWebサイトwww.formatech.com（「サイト」）への訪問者および当社のサイトを通じて利用可能なサービス、または当社のパートナーのサイトにおける当社Shopifyアプリ（「当社Shopifyアプリ」）、およびForma iOSアプリ（「我々のアプリ」）（総称して、「サービス」）を通じて取得した情報を、どの様に当社が収集、使用、および開示するのかを説明します。 </p>
				
				<p class="privacy_p">サイトにアクセスするか、当社のいずれかのサービスを使用することは、お客様の個人情報がこのポリシーに記載されているとおりに処理されることに同意するものとします。当社のサイトまたはサービスの使用、およびプライバシーに関する紛争は、損害賠償および紛争の解決に適用される制限を含む本ポリシーおよび利用規約の対象となります。</p>
				
				<p class="privacy_h1">当社が収集する情報</p>
				<p class="privacy_p">当社は、お客様および第三者から直接、またはお客様が当社のサイトまたはサービスを使用することにより自動的に、お客様に関する情報を収集します。</p>
				
				<p class="privacy_h1">当社がお客様から直接収集する情報</p>
				<p class="privacy_p">お客様は、当社へのユーザー登録または個人情報の提供をせずとも、サイトの特定の領域を閲覧することができます。当社のサービスにユーザー登録する場合は、お名前と電子メールアドレスを提供する必要があります。さらに当社のサービス利用に関連して、第三者に個人情報を提供する場合、お客様はそれらのサービスを使用する為の個人情報を当社に提供するため、及び当社がその個人情報を利用することに対して、必要とされるすべての許可と同意を自ら有する事に責任を持ち、また本サービスを提供の為に当社が個人情報を使用する事は、適用される法律、規則、規制、または命令に違反しないことも明確にする責任があります。</p>
				
				<p class="privacy_h1">自動的に収集する情報</p>
				<p class="privacy_p">当社は、Cookieおよびその他のテクノロジーを通じて、お客様による当社のサイトまたはサービスの使用に関する以下の情報を自動的に収集する場合があります。
				「ブラウザの種類とオペレーティングシステム、表示するWebページ、クリックしたリンク、あなたのIPアドレス、 お客様が当社のサイトにアクセスしたり、当社のサービスを使用したりする時間の長さ、および参照URL、または当社のサイトにアクセスする前に閲覧したWebページ」
				この情報を、ユーザー名、名前、その他の個人情報など、収集したその他の情報と組み合わせる場合があります。詳細については、以下の「Cookieおよびその他の追跡メカニズム」のセクションを参照してください。</p>
			
				<p class="privacy_h1">当社がお客様の情報を使用する方法</p>
				<p class="privacy_p">当社は、以下の目的で、お客様の個人情報を含むお客様の情報を使用します。</p>
				<ul class="privacy_list">
					<li>当社のサイトおよびサービスをお客様に提供するため、当社のサイトおよびサービスの使用についてお客様と情報交換するため、お客様の問い合わせに対応するため、注文を履行するため、およびその他のカスタマーサービス目的のため。</li>
					<li>当社がお客様に送信または表示する可能性のあるコンテンツおよび情報を調整し、サイトのカスタマイズ、およびパーソナライズされたヘルプとご案内を提供し、その他の方法でサイトまたは当社のサービスを使用する際のお客様のユーザー体験をパーソナライズするため。</li>
					<li>マーケティングおよび販促目的。たとえば、メールアドレスなどの情報を使用して、ニュースやニュースレター、特別オファー、プロモーションを送信したり、興味があると思われる製品や情報について連絡したりする場合があります。また、お客様について学習した情報を使用して、第三者のWebサイトで、サービスの宣伝広告をサポートする場合があります。</li>
					<li>当社のサイトおよびサービスを改善し、ユーザーの要望や好みに対応する事、およびその他の調査および分析の目的で、ユーザーが当社のサイトおよびサービスにアクセスして使用する方法を、特定のグループに集約された形、および個別の形の両方で、よりよく理解するため。</li>
				</ul>
				<p class="privacy_h1">当社がお客様の情報を共有するケース</p>
				<p class="privacy_p">個人情報を含むお客様の情報を次のように共有する場合があります。</p>
				<ul class="privacy_list">
					<li>系列企業　当社は、お客様にサービスを提供する目的でのみ、お客様から収集した情報を当社の系列会社または子会社に開示する場合があります。ただし、その場合、お客様の個人情報の使用および開示は、このポリシーに従って、そのような系列会社および子会社によって維持されます。</li>
					<li>サービスプロバイダー　当社は、お客様から収集した情報を、当社に代わって役割を実行するサードパーティベンダー、サービスプロバイダー、請負業者、またはエージェントに開示する場合があります。</li>
					<li>事業譲渡　当社が他社に買収または合併された場合、当社の資産の実質的にすべてが他社に譲渡された場合、または破産手続きの一環として、当社はお客様から収集した情報を他社に譲渡する場合があります。</li>
					<li>法的手続きに応じて　また、法律、司法手続き、裁判所命令、または召喚状への対応などの他の法的手続きを遵守するために、お客様から収集した情報を開示する場合があります。</li>
					<li>当社と他社を保護するために　また、違法行為、詐欺の疑い、人の安全を脅かす可能性のある状況、利用規約の違反、またはこれに関して調査、防止、または措置を講じる必要があると当社が考える場合、お客様から収集した情報を開示する場合があります。このポリシーと利用規約違反のエビデンスとして、または当社が関与している訴訟の証拠として。</li>
					<li>集約および匿名化された情報。当社は、マーケティング、広告、調査、または同様の目的で、ユーザーに関する集約情報または匿名化された情報を第三者と共有する場合があります。</li>
				</ul>
				<p class="privacy_p">上記の場合を除き、お客様の同意なしに、ダイレクトマーケティングの目的でお客様の個人情報を第三者に販売または共有することはありませんのでご注意ください。</p>
			
				<p class="privacy_h1">Cookieおよびその他の追跡メカニズムの使用</p>
				<p class="privacy_p">当社およびサードパーティのサービスプロバイダーは、Cookieおよびその他の追跡メカニズムを使用して、お客様による当社のサイトおよびサービスの使用に関する情報を追跡します。当社は、この情報をお客様から収集した他の個人情報と組み合わせる場合があります（また、サードパーティのサービスプロバイダーが当社に代わってこれを行う場合があります）。</p>
				
				<p class="privacy_p">現在、当社のシステムはブラウザの「追跡禁止」リクエストを認識していません。ただし、このセクションで説明されているように（たとえば、Cookieを無効にすることにより）特定の追跡を無効にすることはできますが、そのような無効化はサイトおよびサービスの使用に影響を与えます。</p>
				
				<p class="privacy_p">Cookie  Cookieは、記録を保持する目的でWebブラウザを介してコンピュータのハードドライブに転送される英数字の識別子です。一部のCookieを使用すると、サイトやサービスを簡単にナビゲートできますが、その他のCookieは、ログインプロセスを高速化したり、サイトやサービスでのアクティビティを追跡したりするために使用されます。Cookieには、セッションCookieと永続Cookieの2種類があります。</p>
				<ul class="privacy_list">
					<li>セッションCookie 　セッションCookieは、オンラインセッション中にのみ存在します。ブラウザを閉じるか、コンピュータの電源を切ると、コンピュータから消えます。当社はセッションCookieを使用して、セッション中またはサイトへのログイン中にシステムがお客様を個別に識別できるようにします。これにより、ログイン後、サイト内を移動する際に、オンライントランザクションとリクエストを処理し、本人確認を行うことができます。</li>
					<li>永続Cookie 　ブラウザを閉じるか、コンピュータの電源を切った後も、永続Cookieがコンピュータに残ります。永続　Cookieを使用して、ユーザーアクティビティに関する集計された情報と統計的な情報を追跡します。</li>
				</ul>
				<p class="privacy_h1">Cookieの無効化</p>
				<p class="privacy_p">ほとんどのWebブラウザは自動的にCookieを受け入れますが、必要に応じて、ブラウザオプションを編集して、その後Cookieをブロックすることができます。ほとんどのブラウザのツールバーのヘルプ部分には、コンピュータが新しいCookieを受け入れないようにする方法、新しいCookieを受信したときにブラウザに通知する方法、またはCookieを完全に無効にする方法が記載されています。Cookieを無効にすると当サイトの訪問者は、サイトの特定の領域を閲覧したり、サービスを使用したりすることができなくなります。</p>
				
				<p class="privacy_h1">サードパーティ分析</p>
				<p class="privacy_p">当社はGoogle Analyticsなどの自動化されたデバイスとアプリケーションを使用して、サイトとサービスの使用状況を評価します。また、他の分析手段を使用してサービスを評価する場合があります。これらのツールを使用して、サービス、パフォーマンス、およびユーザーエクスペリエンスを向上させます。これらのエンティティは、Cookieやその他の追跡技術を使用してサービスを実行する場合があります。これらの第三者とお客様の個人情報を共有することはありません。</p>
				
				<p class="privacy_h1">サードパーティのリンク</p>
				<p class="privacy_p">当社のサイトおよびサービスには、サードパーティのWebサイトへのリンクが含まれている場合があります。このようなリンクされたWebサイトへのアクセスおよび使用は、このポリシーには準拠していません。代わりに、これらのサードパーティWebサイトのプライバシーポリシーに準拠しています。当社は、そのような第三者のウェブサイトでの情報セキュリティ施策については責任を負いません。</p>
				
				<p class="privacy_h1">私の個人情報に対してのセキュリティ</p>
				<p class="privacy_p">当社は、収集した情報を紛失、誤用、不正アクセス、開示、改ざん、破壊から保護するために、商業上合理的な予防措置を講じています。当社はこの様に努めますが、100％を保証できるデータセキュリティ対策はありませんのでご注意ください。</p>
				
				<p class="privacy_p">パスワード、電話、コンピューターへの不正アクセスから保護するための措置を講じる必要があります。特に、共有コンピューターの使用後にはログアウト（サインオフ）し、他の誰も知らない、または簡単に推測できない強固なパスワードを選択し、ログイン状態とパスワード秘密性を維持する必要があります。当社は、パスワードの紛失、盗難、または侵害、または不正なパスワードの利用によるアカウント内での動作について責任を負いません。</p>
				
				<p class="privacy_h1">私の個人情報へのアクセス</p>
				<p class="privacy_p">送信した個人情報を更新する場合は、contact @ formatech.comまでご連絡ください。更新、変更、または削除した情報のコピーは、一定期間、サイトのキャッシュおよびアーカイブされたページに表示されたままになる場合があることに注意してください。</p>
				
				<p class="privacy_h1">個人情報の使用に関してどのような選択肢がありますか？</p>
				<p class="privacy_p">定期的にプロモーションメールや情報メールを送信する場合があります。電子メールに含まれている受取拒否の指示に従うことにより、そのような送信を拒否することができます。受取拒否リクエストの処理には最大10営業日かかる場合がありますのでご注意ください。推奨事項や興味があると思われるその他の情報に関する電子メールの受信を受け取り拒否した場合でも、お客様のアカウントに関する情報や、お客様が要求したサービス、又は当社からお受け取りになったサービスに関する情報を電子メールでお送りする場合があります。</p>
				
				<p class="privacy_h1">13歳未満のお子様</p>
				<p class="privacy_p">当サイトおよびサービスは13歳未満のお子様向けには設計されていません。13歳未満のお子様から個人情報が提供されたことが判明した場合、そのような情報をシステムから削除します。</p>
				
				<p class="privacy_h1">お問い合わせ</p>
				<p class="privacy_p">当社のサイトまたはサービスのプライバシーの内容ついてご質問、ご意見等がある場合は、contact @ formatech.comまでご連絡ください。</p>
				
				<p class="privacy_h1">このポリシーの変更</p>
				<p class="privacy_p">このポリシーは、上記の発効日現在のものです。このポリシーは随時変更される可能性がありますので、定期的に確認してください。このポリシーへの変更はサイトに掲載します。お客様から収集済の個人情報に関する当社の実施事項に重大な影響を与える様な変更をする場合、当社のサイトで変更を強調することにより、またはあなたのアカウントのメールアドレスに通知することで、事前通知をするよう努めます。（このため、アカウント情報が変更された場合は、すみやかに更新すして頂く必要があります。）</p>
			</div>
			<!-- 同意してスタート -->
			<div class="footer-container_loading_start">
				<img class="" src="img/logos/button_loading_start.webp" id="accept_privacy_button_b" onclick="accept_privacy_and_start()">
			</div>
			<!-- 終了 -->
			<div class="footer-container_loading_cancel">
				<img class="" src="img/logos/button_loading_cancel.webp" id="cancel_privacy_button_b" onclick="endproc_order()">
			</div>
		</div>

		<!-- ******************************************************************************* -->
		<!-- ItemCreate.html -->
		<!-- ******************************************************************************* -->
    <!-- Item Createのメイン部分 -->
		<div id="item-create-page" class="loaded">
      <!-- HEADER -->
			<header>
				Tシャツを作ろう
			</header>
			<!-- NAV -->
			<!-- MAIN -->
      <section id="contents">
        <div class="flex-container">
          <!-- 「非表示」合成するcanvas「Tシャツ」 -->
          <canvas hidden id="image-base" width="200" height="170"></canvas>
          <!-- 「非表示」合成するcanvas「アイコン画像」 -->
          <canvas hidden id="image-icon" width="300" height="300"></canvas>
          <!-- 合成結果用のcanvas「アイテム画像」 -->
          <button hidden type="button" onclick="RegisterItem_Proc()">Forma送信</button>
        </div>
        <!-- 消しゴム -->
        <p id="eraser"><button hidden type="button" id="btn-eraser"><img src="icon/eraser-solid.svg" width="32" height="32"></button></p>
      </section>
			<main>
				<!-- カメラ -->
				<div id="area-capture-item-create" class="area-container">
					<div id="video-container-item-create">
						<!-- VIDEOの映像 -->
						<video id="camera-itemcreate" autoplay="1">
							<p>動画の再生に対応していません</p>
						</video>
						<canvas id="overlay-Target" width="300" height="300"></canvas>        <!-- 重ねて描画する canvas -->
						<!-- チャプチャーした画像 -->
						<canvas id="resultItemPict" class="item-hide"></canvas>
					</div>
				</div>
			</main>
			<!-- FOOTER -->
			<footer>
				<!-- コントロールボタン -->
				<div id="area-button" class="area-container">
					<!-- 「撮り直し」アイテム用の画像の撮影と合成 -->
					<div class="box_command">
						<!-- <img src="img/arrow_left.png" id="btn_image_back" onclick="btnimg_click_back()"> -->
						<img src="img/logos/cmd_camera_left.webp" id="btn_reItemCreate" onclick="itemPict_Start()">
					</div>
					<!-- アイテム用の画像の撮影と合成 -->
					<div class="box_command">
						<img class="" src="img/logos/cmd_camera_shutter.webp" id="btn_ItemCreate" 
                    onclick="itemIconCreate()">
					</div>
					<!-- 次に遷移 -->
					<div class="box_command">
						<img src="img/logos/cmd_camera_right.webp" id="btn_ItemCreate_toCamera" onclick="jumpto_Camera()">
					</div>
				</div>
				<div class="footer-command-area">
					<button type=button onclick="cameraPositionChange()">カメラ変更</button>
					<img class="cmd_button_end" src="img/logos/cmd_button_end.webp" onclick="endproc()">
				</div>
				<div>
					<p>
						<span id="camera-status"></span>
					</p>
					<p>
						<span id="Forma_status"></span>
					</p>
					<p>
						<span id="forma_login"></span>
					</p>
					<p>itemUUID: 
						<span id="itemuuid"></span>
					</p>
					<p>avatarUUID: 
						<span id="avataruuid"></span>
					</p>
				</div>
				<!-- 音声 -->
				<div id="area-sound" class="area-container" hidden>
					<p>
						<button type=button onclick="play_countdown()">テスト再生</button>
						<span>再生状態:<span id="soundStatus"></span></span>
					</p>
					<!-- 
						audioタグで先読みしておいたほうがいいです。
						じゃないとエラーが出ました。
						controlsでコントロールGUIの表示をします。
					-->
					<audio id="sound-countdown" controls src="sound/countdown5to1.mp3"></audio>
					<audio id="sound-shutter" controls src="sound/shutter.mp3"></audio>
				</div>
				<!-- カメラコントロール -->
				<div id="area-camera-ctrl" class="area-container">
					<!-- 解像度の設定ボタン -->
					<div>
						<button type="button" class="button_command" onclick="videoSize(1024, 576)">H:1024 * W:576</button>
						<button type="button" class="button_command" onclick="videoSize(576, 1024)">H:576 * W:1024</button>
					</div>
					<!-- VIDEO選択画面 -->
					<div>
						<select id="camera_list" size="1" style="width:160pt;">
							<option>(video)</option>
						</select>
						<button id="start_video_button" class="button_command" onclick="startSelectedVideo()">Start Video</button>
					</div>
					<p>H:<span id="resolution-height"></span></p>
					<p>W:<span id="resolution-width"></span></p>
          <!-- キャプチャ画面 -->
          <div>
            <canvas id="canvas-capture"></canvas>
          </div>
					<div id="camera-devices">
						<p>mediaDevicesを列挙します。</p>
						<button type="button" onclick="getCameraDevices()">取得</button>
						<div id="list-camera-devices">
						</div>
					</div>
				</div>
			</footer>
		</div>

		<!-- ******************************************************************************* -->
		<!-- camera.html -->
		<!-- ******************************************************************************* -->
		<!-- 写真の登録・トライオン中のローディング画面 -->
		<div id="camera-tryon" class="loaded">
			<!-- タイトル -->
			<p>Status : <span id="title_logo">Tシャツを作ってみる！</span></p>
			<!-- くるくる -->
			<!-- <div class="spinner"></div> -->
			<!-- 吹き出しでフェーズ -->
			<div class="tryonheader">

			</div>
			<div class="area_talk">
				<ul class="messages">
					<!-- 1番目 -->
					<li class="left_side">
						<div class="pic">
							<!-- <img id="logo_moving_1" src="img/c1_character_pc.gif"> -->
							<img id="logo_1" class="tryon_wait_image" src="img/logos/c1_character.gif">
							<img id="logo_moving_1" class="hidden_image" src="img/logos/c1_character.gif">
							<img id="logo_stop_1" class="hidden_image" src="img/logos/c1_character_greet.webp">
						</div>
						<div id="phase_1" class="message_conatainer">
							<img id="message_1">
							<img id="message_moving_1" class="hidden_image" src="img/logos/message01_start.webp">
							<img id="message_stop_1" class="hidden_image" src="img/logos/message01_end.webp">
						</div>
					</li>
					<!-- 2番目 -->
					<li class="right_side">
						<div class="pic">
							<!-- <img class="loading_icon_gif loading_icon_left" src="img/c2_character_pc.gif"> -->
							<img id="logo_2" class="tryon_wait_image" src="img/logos/c2_character.gif">
							<img id="logo_moving_2" class="hidden_image" src="img/logos/c2_character.gif">
							<img id="logo_stop_2" class="hidden_image" src="img/logos/c2_character_greet.webp">
						</div>
						<div id="phase_2" class="message_conatainer">
							<img id="message_2">
							<img id="message_moving_2" class="hidden_image" src="img/logos/message02_start.webp">
							<img id="message_stop_2" class="hidden_image" src="img/logos/message02_end.webp">
						</div>
					</li>
					<!-- 3番目 -->
					<li class="left_side">
						<div class="pic">
							<!-- <img id="logo_moving_3" src="img/c3_character_pc.gif"> -->
							<img id="logo_3" class="tryon_wait_image" src="img/logos/c3_character.gif">
							<img id="logo_moving_3" class="hidden_image" src="img/logos/c3_character.gif">
							<img id="logo_stop_3" class="hidden_image" src="img/logos/c3_character_greet.webp">
						</div>
						<div id="phase_3" class="message_conatainer">
							<img id="message_3">
							<img id="message_moving_3" class="hidden_image" src="img/logos/message03_start.webp">
							<img id="message_stop_3" class="hidden_image" src="img/logos/message03_end.webp">
						</div>
					</li>
					<!-- 4番目 -->
					<li class="right_side">
						<div class="pic">
							<!-- <img id="logo_moving_4" src="img/c4_character_pc.gif"> -->
							<img id="logo_4" class="tryon_wait_image" src="img/logos/c4_character.gif">
							<img id="logo_moving_4" class="hidden_image" src="img/logos/c4_character.gif">
							<img id="logo_stop_4" class="hidden_image" src="img/logos/c4_character_greet.webp">
						</div>
						<div id="phase_4" class="message_conatainer">
							<img id="message_4">
							<img id="message_moving_4" class="hidden_image" src="img/logos/message04_start.webp">
							<img id="message_stop_4" class="hidden_image" src="img/logos/message04_end.webp">
						</div>
					</li>
					<!-- おわり -->
				</ul>
			</div>
		</div>
		<!-- カメラ撮影結果表示 -->
		<div id="camera_result" class="loaded">
			<!-- 画像の表示エリア -->
			<div id="camera_result_header">
				<!-- TryOnの結果画像 -->
				<img id="tryon_result_picture">
			</div>
			<!-- ボタンエリア -->
			<div  id="camera_result_footer">
				<div class="footer-container">
					<img class="cmd_button_reselect" src="img/logos/cmd_button_reselect.webp" onclick="jumpto_index()">
					<!-- <button class="button_command" onclick="jumpto_index()">選びなおす</button> -->
					<img class="cmd_button_print fluffy" src="img/logos/cmd_button_print_T.webp" onclick="jumpto_Order()">
					<!-- <button class="button_command fluffy" onclick="jumpto_Order()">購入</button> -->
				</div>
			</div>
		</div>
		<!-- cameraのメイン部分 -->
		<div id="camera-page" class="">
			<header>
				人物を撮ろう
			</header>
			<!-- ふわふわの注意 -->
			<!-- 注意1 -->
			<div class="camera_caution_container_1">
				<img class="fluffy_cloud" src="img/logos/caution_1.webp">
			</div>
			<!-- 注意2 -->
			<div class="camera_caution_container_2">
				<img class="fluffy_cloud" src="img/logos/caution_2.webp">
			</div>
			<!-- 注意3 -->
			<div class="camera_caution_container_3">
				<img class="fluffy_cloud" src="img/logos/caution_3.webp">
			</div>
			<!-- HEADER -->
			<!-- NAV -->
			<!-- MAIN -->
			<main>
				<!-- カメラ -->
				<div id="area-capture" class="area-container">
					<div id="video_container">
						<!-- VIDEOの映像 -->
						<video id="camera" autoplay="1">
							<p>動画の再生に対応していません</p>
						</video>
						<!-- チャプチャーした画像 -->
						<canvas id="canvas-photo"></canvas>
					</div>
				</div>
			</main>
			<!-- FOOTER -->
			<footer>
				<!-- コントロールボタン -->
				<div id="area-button" class="area-container">
					<div class="box_command">
						<!-- <img src="img/arrow_left.png" id="btn_image_back" onclick="btnimg_click_back()"> -->
						<img src="img/logos/cmd_camera_left.webp" id="btn_image_back" onclick="jumpto_index()">
					</div>
					<div class="box_command">
						<img class="fluffy_slime" src="img/logos/cmd_camera_shutter.webp" id="btn_image_shutter" onclick="btnimg_click_shutter()">
					</div>
					<div class="box_command">
						<img src="img/logos/cmd_camera_right.webp" id="btn_image_save" onclick="click_PictureTryOn()">
					</div>
				</div>
				<div hidden>
					<p>
						<span id="camera-status"></span>
					</p>
					<p>
						<span id="Forma_status"></span>
					</p>
					<p>
						<span id="forma_login"></span>
					</p>
					<p>itemUUID: 
						<span id="itemuuid"></span>
					</p>
					<p>avatarUUID: 
						<span id="avataruuid"></span>
					</p>
				</div>
				<!-- 音声 -->
				<div id="area-sound" class="area-container" hidden>
					<p>
						<button type=button onclick="play_countdown()">テスト再生</button>
						<span>再生状態:<span id="soundStatus"></span></span>
					</p>
					<!-- 
						audioタグで先読みしておいたほうがいいです。
						じゃないとエラーが出ました。
						controlsでコントロールGUIの表示をします。
					-->
					<audio id="sound-countdown" controls src="sound/countdown5to1.mp3"></audio>
					<audio id="sound-shutter" controls src="sound/shutter.mp3"></audio>
				</div>
				<!-- カメラコントロール -->
				<div id="area-camera-ctrl" class="area-container" hidden>
					<!-- 解像度の設定ボタン -->
					<div>
						<button type="button" class="button_command" onclick="videoSize(1024, 576)">H:1024 * W:576</button>
						<button type="button" class="button_command" onclick="videoSize(576, 1024)">H:576 * W:1024</button>
					</div>
					<!-- VIDEO選択画面 -->
					<div>
						<select id="camera_list" size="1" style="width:160pt;">
							<option>(video)</option>
						</select>
						<button id="start_video_button" class="button_command" onclick="startSelectedVideo()">Start Video</button>
					</div>
					<p>H:<span id="resolution-height"></span></p>
					<p>W:<span id="resolution-width"></span></p>
					<div id="camera-devices">
						<p>mediaDevicesを列挙します。</p>
						<button type="button" onclick="getCameraDevices()">取得</button>
						<div id="list-camera-devices">
						</div>
					</div>
				</div>
			</footer>
		</div>

		<!-- ******************************************************************************* -->
		<!-- order.html -->
		<!-- ******************************************************************************* -->
		<div id="order-page" class="loaded">
			<!-- HEADER -->
			<header>
				<div class="header-container"></div>
			</header>
			
			<!-- NAV -->
			<nav>
				<div class="nav-container">
					<div class="order_title">
						<span>購入用レシート印刷</span>
					</div>
				</div>
			</nav>
			<!-- MAIN-AREA -->
			<div class="main-area-container">
				<!-- MAIN -->
				<main>
					<div class="main-container">
						
						<!-- 注文確認エリア -->
						<div class="order_container">
							<!-- デザイン -->
							<div class="order_design_container">
								<img id="order_design_image">
							</div>
							<!-- 注文詳細 -->
							<div class="order_detail_container">
								<div class="order_detail_data_container">
									
									<!-- デザイン番号 -->
									<p class="design_id weight_small" id="order_DesignID"></p>
									<!-- デザイン名称 -->
									<p class="design_id weight_large" id="order_DesignName"></p>
									<!-- 価格 -->
									<p class="design_id weight_large">￥ <span id="ItemPrice">2,189</span></p>
									<!-- サイズ選択 -->
									<table class="design_id">
										<tr>
											<td>
												<span class="size-category">Ladies</span>
											</td>
											<td>
												<label><input type="radio" name="size" value="Ladies) M"><span class="size-caption">M</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Ladies) L"><span class="size-caption">L</span></label>
											</td>
										</tr>
										<tr>
											<td>
												<span class="size-category">Mens</span>
											</td>
											<td>
												<label><input type="radio" name="size" value="Mens) M"><span class="size-caption">M</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Mens) L"><span class="size-caption">L</span></label>
											</td>
										</tr>
										<tr>
											<td>
												<span class="size-category">Kids</span>
											</td>
											<!-- 2021/04/23 サイズ展開なし -->
											<!-- <td>
												<label><input type="radio" name="size" value="Kids) 80"><span class="size-caption">80</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 90"><span class="size-caption">90</span></label>
											</td> -->
											<td>
												<label><input type="radio" name="size" value="Kids) 100"><span class="size-caption">100</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 110"><span class="size-caption">110</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 120"><span class="size-caption">120</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 130"><span class="size-caption">130</span></label>
											</td>
										</tr>
									</table>
								</div>
							</div>
						</div>
					</div>
				</main>
			</div>
			<!-- FOOTER -->
			<footer>
				<div class="footer-container">
					<img class="cmd_button_reselect" src="img/logos/cmd_button_reselect.webp" onclick="jumpto_index()">
					<!-- <button class="button_command" type=button onclick="jumpto_index()">選びなおす</button> -->
					<img class="cmd_button_print fluffy" src="img/logos/cmd_button_print_T.webp" onclick="getPrintData()">
					<!-- <button class="button_command fluffy" type=button onclick="getPrintData()">印刷</button> -->
				</div>
				<div class="footer-command-area">
					<img class="cmd_button_end" src="img/logos/cmd_button_end.webp" onclick="endproc_order()">
					<!-- <button class="button_caution" type=button onclick="endproc_order()">終 了</button> -->
				</div>
			</footer>
		</div>

		<!-- タイムアウトのスクリプト -->
		<script>
			// この時間経過したら終了
			const COUNT_MAX = 60;	//2021/0423

			let count = 0;
			let flagExit = false;
			//
			// タイマーを任意の数値にします。
			//
			function countSet(value)
			{
				count = value;
			}
			//
			// タイマーをリセットします。
			//
			function countReset() {
				count = 0;
			}
			//
			// タイマーを中止します。
			//
			function countStop() {
				console.log('タイムアウトを中止しました');
				flagExit = true;
			}
			//
			// タイマーを開始します。
			//
			function countStart() {
				console.log('タイムアウト処理を開始しました');
				flagExit = false;
				countUp();
			}
			const countUp = () => {
        return;
				console.log(count++);
				// 指定時間経過で終了
				if(COUNT_MAX < count)
				{
					console.log('タイムアウトで終了しました');
					endproc_order();
					return;
				}
				if(flagExit)
				{
					return;
				}
				setTimeout(countUp, 1000);
			}
			
			// プライバシーポリシーのスクロール検出
			const elem_scroll_privacy = document.getElementById('privacy_scroll_area')
			elem_scroll_privacy.onscroll = function()
			{
				// **********
				// タイムアウト
				countReset();
				// **********
			}
		</script>

    <!-- アイテム画像作成のスクリプト -->
    <script>
      /**
      * [onload] Tシャツの画像を描画
      */
      function drawImageBase(){
        const tshirts = new Image();
        tshirts.src = "img/t-org-small.jpg";
        tshirts.onload = () =>{
          const canvas = document.querySelector("#image-base");
          canvas.height = tshirts.height;
          canvas.width = tshirts.width;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(tshirts, 0, 0, canvas.width, canvas.height);

          const image_item = document.querySelector("#resultItemPict");
          image_item.height= tshirts.height;
          image_item.width = tshirts.width;
        }
      }

      /**
      * [onload] アイコンの画像を描画
      */
      function drawImageIcon(){
        const Unaju = new Image();
        Unaju.src = "img/OSUSUME.webp";
        Unaju.onload = () =>{
          const canvas = document.querySelector("#image-icon");
          const ctx = canvas.getContext("2d");
          ctx.drawImage(Unaju, 0, 0, canvas.width, canvas.height);
        }
        // const canvas = document.querySelector("#image2");
        // const ctx = canvas.getContext("2d");
        // ctx.font = "32px serif";
        // ctx.fillStyle = "Red";
        // ctx.fillText("うな重", 45, 150);
      }

      /**
      * Canvasをすべて削除する
      *
      * @param {string} target 対象canvasのid
      * @return {void}
      */
      function eraseCanvas(target){
        const canvas = document.querySelector(target);
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }

      /**
      * Canvasを画像として取得
      *
      * @param {string} id  対象canvasのid
      * @return {object}
      */
      function getImagefromCanvas(id){
        return new Promise((resolve, reject) => {
          const image = new Image();
          const ctx = document.querySelector(id).getContext("2d");
          image.onload = () => resolve(image);
          image.onerror = (e) => reject(e);
          image.src = ctx.canvas.toDataURL();
        });
      }
    </script>
    <!-- カメラ処理スクリプト -->
    <script type="text/javascript">
      'use strict';

			//---------------------------------------------
			// プロパティ
			//---------------------------------------------
			let isTakeItemPicture = false;      // 撮影済みか(T:済み/F:未撮影)
			function get_isTakeItemPicture()
			{
				return isTakeItemPicture;
			}
			function clear_isTakeItemPicture()
			{
				isTakeItemPicture = false;
			}
      //------------------------------------------
      // 定数定義
      //------------------------------------------
      const VIDEO_WIDTH = 1024;          // ビデオ画像の幅
      const VIDEO_HEIGHT = 576;         // ビデオ画像の高さ

      const ICON_WIDTH = 300;           // 切り出し画像の幅
      const ICON_HEIGHT = 300;          // 切り出し画像の高さ

      const ICON_LOC_X = 333;           // アイコン貼り付け位置X
      const ICON_LOC_Y = 300;           // アイコン貼り付け位置Y
      
      //------------------------------------------
      // 定数領域にidで指定した要素を代入する
      //------------------------------------------
      const $divListCameraDevices = document.getElementById("list-camera-devices");   // カメラデバイス列挙エリア
      const $label_h =document.getElementById("resolution-height");
      const $label_w =document.getElementById("resolution-width");
      const $canvasCapture =document.getElementById("canvas-capture");
      const video_ItemCreate = document.querySelector("#camera-itemcreate");
      const cameraList = document.getElementById("camera_list");
      //------------------------------------------
      // 変数領域
      //------------------------------------------
      let useFrontItemCreate = false;                        // フロントカメラ:true, バックカメラ:false
      //------------------------------------------
      // グローバル変数
      //------------------------------------------
      // カメラのデフォルト設定
      const CONSTRAINTS_ItemCreate = {
        audio: false,
        video: {
          
          //--------------------------
          // PCでやるときの設定
          //--------------------------
          width: VIDEO_WIDTH,
          height: VIDEO_HEIGHT,
          //--------------------------
          // スマホでやるときの設定
          //--------------------------
          // min    :最小値
          // max    :最大値
          // ideal  :理想的な値
					width: { min: 320, ideal: 1024, max: 1024 },
		      height: { min: 180, ideal: 576, max:576},
          aspectRatio: 1.777777778,
          frameRate: { max: 30 },
          
          facingMode: null,  // どのカメラを利用するか
          // facingModeには最終的に以下のいずれかの値を入れる
          //   facingMode: "user"                    // フロントカメラを利用する
          //   facingMode: { exact: "environment" }  // リアカメラを利用する
          deviceId: null
        }
      };
      // 現在のStream
      let curSTREAM = null;
      //---------------------------------------------
      // [event] ページ読み込み完了
      //---------------------------------------------
      function itemcreate_onload() {
        // カメラデバイス情報の取得
        getCameraDevices();
        // カメラ接続
        //------------------------------
        // 前後カメラの設定 背面カメラ
        useFrontItemCreate = false;
        //------------------------------
        CONSTRAINTS_ItemCreate.video.facingMode = (useFrontItemCreate)?  "user":{ exact: "environment" };
        syncCamera_ItemCreate(video_ItemCreate);
        useFrontItemCreate = !useFrontItemCreate;         // boolean値を反転

				// 初期画像の表示
				drawImageBase();				// #image1に画像を描画
				drawImageIcon();				// #image2にテキストを描画
      }
      window.onload = () => {
        // カメラデバイス情報の取得
        getCameraDevices();
        // カメラ接続
        //------------------------------
        // 前後カメラの設定 背面カメラ
        // useFrontItemCreate = false;
        //------------------------------

        CONSTRAINTS_ItemCreate.video.facingMode = (useFrontItemCreate)?  "user":{ exact: "environment" };
        syncCamera_ItemCreate(video_ItemCreate);
        useFrontItemCreate = !useFrontItemCreate;         // boolean値を反転
        itemCreate_initImages();

        // Formaにログイン
        LogIn("serv1se2010-a@yahoo.co.jp", "lets@2021");
      };
      // カメラ解像度の変更
      function videoSize(height, width) {
        CONSTRAINTS_ItemCreate.video.height = height;
        CONSTRAINTS_ItemCreate.video.width = width;
        syncCamera_ItemCreate(video_ItemCreate);
      }
      // カメラデバイスの変更
      function startSelectedVideo() {
        var deviceId = getSelectedVideo();
        console.log('selected video device id=' + deviceId);
        CONSTRAINTS_ItemCreate.video.facingMode = null;
        CONSTRAINTS_ItemCreate.video.deviceId = deviceId;
        syncCamera_ItemCreate(video_ItemCreate);
      }
      function getSelectedVideo() {
        var id = cameraList.options[cameraList.selectedIndex].value;
        return id;
      }
			//
      // カメラを<video>と同期
      //
      // @param {object} video
      // @param {boolean} [is_front=true]
      //
      function syncCamera_ItemCreate(video){
        // // 前後カメラの設定
        // CONSTRAINTS_ItemCreate.video.facingMode = (is_front)?  "user":{ exact: "environment" };
        
        // すでにカメラと接続していたら停止
        stopCamera_ItemCreate();
        // カメラと接続する
        navigator.mediaDevices.getUserMedia(CONSTRAINTS_ItemCreate)
          .then( (stream) => {
            curSTREAM = stream;   // 前後の切り替え用に保持

            // <video>とStremaを接続
            video.srcObject = stream;
            video.onloadedmetadata = (e) => {
              
              video.play();
              // 解像度を画面表示
              $label_h.innerText =`H:${video.videoHeight}`;
              $label_w.innerText =`W:${video.videoWidth}`;
            };
          })
          .catch( (err) => {
            console.log(`${err.name}: ${err.message}`);
            alert(
              "カメラとの接続時にエラーが発生しました" + "\n"
              + err.name + "\n"
              + err.message
              );
          });
      }

      function stopCamera_ItemCreate()
      {
        // すでにカメラと接続していたら停止
        if( curSTREAM !== null ){
          curSTREAM.getVideoTracks().forEach( (camera) => {
            camera.stop();
          });
        }
      }
      // 前後カメラの切り替え
      function cameraPositionChange()
      {
        CONSTRAINTS_ItemCreate.video.deviceId = null;
        CONSTRAINTS_ItemCreate.video.facingMode = (useFrontItemCreate)?  "user":{ exact: "environment" };
        syncCamera_ItemCreate(video);
        useFrontItemCreate = !useFrontItemCreate;      // boolean値を反転
      };


      // キャプチャー処理
      function itemIconCreate()
      {
				debugConsole_proc('itemIconCreate button');
        $canvasCapture.width  = video_ItemCreate.videoWidth;
        $canvasCapture.height = video_ItemCreate.videoHeight;
        $canvasCapture.getContext('2d').drawImage(video_ItemCreate, 0, 0);  // canvasに『「静止画取得」ボタン』押下時点の画像を描画
        // アイコンの切り出し
        cutIcon(video_ItemCreate);
        // Tシャツとアイコンの合成
        concatCanvas("#resultItemPict", ["#image-base", "#image-icon"]);
				// 後処理
				itemPict_Result();

				isTakeItemPicture = true;
      }
      // アイコンエリアを切り出して表示
      function cutIcon(asset){
        const canvas = document.querySelector("#image-icon");
        const ctx = canvas.getContext("2d");

        // 元画像はそのまま表示する。
        // ctx.drawImage(asset, 0, 0, canvas.width, canvas.height);
        // 画像を切り出して表示
        ctx.drawImage(
                        asset,
                        //------------------------
                        // 切り出しエリア
                        // 中央部を切り出すため
                        //------------------------
                        (video_ItemCreate.videoWidth - ICON_WIDTH) / 2,   // x
                        (video_ItemCreate.videoHeight - ICON_HEIGHT) / 2, // y
                        ICON_WIDTH,                       // width
                        ICON_HEIGHT,                      // height
                        //------------------------
                        // 貼り付け位置
                        //------------------------
                        0, 0, ICON_WIDTH, ICON_HEIGHT     // 貼り付け位置(x, y, width, height)
                      );
      }
      /**
      * Canvas合成
      *
      * @param {string} base 合成結果を描画するcanvas(id)
      * @param {array} asset 合成する素材canvas(id)
      * @return {void}
      */
      async function concatCanvas(base, asset){
        const canvas = document.querySelector(base);
        const ctx = canvas.getContext("2d");

        for(let i=0; i<asset.length; i++){
          const image1 = await getImagefromCanvas(asset[i]);
          if(i == 0)
          {
            // 元画像はそのまま表示する。
            ctx.drawImage(image1, 0, 0, canvas.width, canvas.height);
          }
          else
          {
            // 上に合成する画像は、表示位置の始点を指定する。
            // 位置を指定して画像を出力
            ctx.drawImage(image1, ICON_LOC_X, ICON_LOC_Y, ICON_WIDTH, ICON_HEIGHT);
          }

        }
      }
      //--------------------------------------------
      // メディアデバイスを取得する
      // https://developer.mozilla.org/ja/docs/Web/API/MediaDevices/enumerateDevices
      // https://qiita.com/massie_g/items/b9863e4366cfed339528
      // https://mganeko.github.io/webrtcexpjp/tool/devicelist.html
      //--------------------------------------------
      function getCameraDevices() 
      {
        $divListCameraDevices.innerHTML="";
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
          console.log("enumerateDevices() not supported.");
          return;
        }
        // カメラリストのクリア
        while(cameraList.lastChild) {
          cameraList.removeChild(cameraList.lastChild);
        }
        
        // List cameras and microphones.
        // kindは   "videoinput"
        //          "audioinput"
        //          "audiooutput"
        navigator.mediaDevices.enumerateDevices()
        .then(function(devices) {
          // デバイス情報 MediaDeviceInfo の内容
          // deviceId       ：（デバイスID)
          // kind           ：（種類：　audioinput, videoinput, audiooutput ）
          //                  ※ audiooutput は Chromeのみ
          // label （名称） ：取得できる場合と、できない場合がある
          // groupId        ：同一ハード機器内のデバイスでは同じになる仕様（けど、まだ？）
          // 成功時
          devices.forEach(function(device, index) {
            console.log(device.kind + ": " + device.label +
                        " id = " + device.deviceId);
            if(device.kind === 'videoinput')
            {
              // セレクトボックスの追加
              var id = device.deviceId;
              var label = device.label || 'camera'; // label is available for https 
              const option = document.createElement('option');
              option.setAttribute('value', id);
              option.innerHTML = label + '(' + id + ')';
              cameraList.appendChild(option);
            }
            // 指定要素にデバイス情報を要素で追加
            const p = document.createElement('p');
            p.innerHTML = `*** [${index}] ***` 
                          + "<br>"
                          + `Kind: ${device.kind}` 
                          + "<br>" 
                          + `Label: ${device.label}`
                          + "<br>" 
                          + `Id: ${device.deviceId}`
            $divListCameraDevices.appendChild(p);
          });
        })
        // エラー発生時
        .catch(function(err) {
          console.log(err.name + ": " + err.message);
        });
      }
    </script>


		<!-- ********************************* -->
		<!-- JS をキャッシュする読み方 -->
		<!-- <script type="text/javascript" src="js/selecter.js?" charset="utf-8"></script> -->
		<script type="text/javascript" src="js/connect.js" charset="utf-8"></script>
		<script type="text/javascript" src="js/camera.js" charset="utf-8"></script>
		<script type="text/javascript" src="js/forma.js" charset="utf-8"></script>

		<!-- JS をキャッシュさせない読み込み方。 -->
		<!-- <script>
			document.write(
				// '<script type="text/javascript" src="js/selecter.js?' + new Date().getTime() + '" charset="utf-8"><\/script>' + "\n" +
				'<script type="text/javascript" src="js/connect.js?' + new Date().getTime() + '" charset="utf-8"><\/script>' + "\n" +
				'<script type="text/javascript" src="js/camera.js?' + new Date().getTime() + '" charset="utf-8"><\/script>' + "\n" +
				'<script type="text/javascript" src="js/forma.js?' + new Date().getTime() + '" charset="utf-8"><\/script>' + "\n"
			);
		</script> -->
		<!-- ********************************* -->
		<script>
			// **********************
			// ページロード時の処理
			// **********************
			window.onload = function() {
				debugConsole_proc('window.onload()');
				// index-Loadingを閉じる
				// 2021/04/26 同意してスタートに変更しました
				// const index_loading = document.getElementById('index-loading');
				// index_loading.classList.add('loaded');
				
				// 初期処理
				index_onloaded();
				camera_onloaded();

				jumpto_index();
        itemcreate_onload();
				// **********
		    // タイムアウト開始
				countStart();
    		// **********
				// 「同意してスタート」ボタンを表示
				document.getElementById('accept_privacy_button').classList.remove('item-hide');
				document.getElementById('accept_privacy_button_b').classList.remove('item-hide');
				document.getElementById('accept_privacy_camera').classList.remove('item-hide');
				document.getElementById('accept_privacy_receipt').classList.remove('item-hide');
				// 動かす
				document.getElementById('accept_privacy_button').classList.add('fluffy');
				document.getElementById('accept_privacy_button_b').classList.add('fluffy');
				document.getElementById('cancel_privacy_button').classList.add('fluffy');
				document.getElementById('cancel_privacy_button_b').classList.add('fluffy');
				document.getElementById('accept_privacy_camera').classList.add('fluffy_slime');
				document.getElementById('accept_privacy_receipt').classList.add('fluffy_slime');
				// 写真撮影フラグをクリア
				clear_isTakePicture();
			}
			// ======================
			// 初期処理
			// ======================
			// [同意して開始]が押された
			function accept_privacy_and_start()
			{
				debugConsole_proc('accept privacy');
				// index-Loadingを閉じる
				document.getElementById('index-loading').classList.add('loaded');
				// プライバシーポリシーを閉じる
				document.getElementById('privacypolicy_page').classList.add('loaded');
				// **********
				// タイムアウト
				countReset();
				// **********
			}
			// index.htmlがロードされた時の処理
			function index_onloaded() {
				debugConsole_proc('index_onloaded()');

				//------------------------------
				// ロード時の処理
				//------------------------------
				try
				{
						console.log('fromHTML_call_Loaded_pageindex');
						let obj =  fromHTML_call_Loaded_pageindex();
						let msg = '';
						for(let i=0;i<obj.length;i++)
						{
								msg += obj[i] + '\t';
						}
				}
				catch(e)
				{
						
				}
			}
			// camera.htmlがロードされた時の処理
			function camera_onloaded() {
				debugConsole_proc('camera_onloaded()');
        // カメラの初期化
        jsCameraStart();

				//------------------------------
        // Formaにログインする。
        // htmlからもできるように　user pass コード内
				//------------------------------
        try
        {
					// let obj = fromHTML_call_Loaded_pagecamera();
					// LogIn(obj[0], obj[1]);
					// const id = 'sanwa.signage.server@gmail.com';
					// const pass = 'sswss2021'
					const id = 'serv1se2010-a@yahoo.co.jp';
					const pass = 'lets@2021'
        	LogIn(id, pass);
        }
        catch(e)
        {
          console.log(e);
        }
      };
		
			// **********************
			// ページ間の移動
			// **********************
			function jumpto_privacy() {
				debugConsole_proc('reading privacy');
				// index-Loadingを閉じる
				document.getElementById('index-loading').classList.add('loaded');
				// privacypageを開く
				document.getElementById('privacypolicy_page').classList.remove('loaded');
				// **********
				// タイムアウト
				countReset();
				// **********
			}
			//------------------------
			// メインページ(セレクタ)に遷移する。
			// index.html
			//------------------------
			function jumpto_index() {
				// **********
				// タイムアウト
				countReset();
				// **********
				debugConsole_proc('jumpto_index()');
				// 消し込み
				hide_camera();
				hide_order();
				// カメラの停止
				// stopCamera();
				// 表示
				show_index();
			}
			//------------------------
			// カメラページに遷移する。
			// camera.html
			//------------------------
			function jumpto_Camera() {
				// **********
				// タイムアウト
				countReset();
				// **********

				// 未撮影時は終わる
				if(!get_isTakeItemPicture())
				{
					alert(
						"[撮影]ボタンをおしてください。"
						);
					return;
				}
				debugConsole_proc('jumpto_Camera()');
				// Formaに接続できていない場合の処理
				if(!Get_logInStatus())
				{
					let msg = '試着サーバーに接続できません。\n';
					msg += 'お手数ですが\n';
					msg += '['
					msg += document.getElementById('btn_index_goto_order').textContent; 
					msg += ']\n';
					msg += 'におすすみください。';
					alert(msg);
					return;
				}
				
				console.log(`uuid_try_item = カメラ合成なので、現在はなし`);
				
				hide_index();
				show_camera();
				camera_accept_click();
			}
			//------------------------
			// 注文ページに遷移する。
			// order.html
			//------------------------
			function jumpto_Order() {
				// **********
				// タイムアウト
				countReset();
				// **********
				debugConsole_proc('jumpto_Order()');
				// 選択アイテムのチェック
				if(!IsSelectItem())return;
				
				// 選択中のアイテムを反映
				document.getElementById('order_design_image').src = GetSelected_Item().designsrc;
				document.getElementById('order_DesignID').textContent = GetSelected_Item().designID;
				document.getElementById('order_DesignName').textContent = GetSelected_Item().itemName;


				let num = 0;
				try {
					num = Number(GetSelected_Item().price);
				}
				catch {

				}
				document.getElementById('ItemPrice').textContent = num.toLocaleString();
				// ほかのページを消し込む
				hide_index();
				hide_camera();
				// カメラの停止
				// stopCamera_ItemCreate();
				
				// 対象ページを開く
				show_order();
			}
			
			// **********************
			// ページ内遷移
			// **********************
			// アバターの再利用のTryOn
			function click_noPictureTryOn() {
			 
				// Formaに接続できていない場合の処理
				if(!Get_logInStatus())
				{
					let msg = '試着サーバーに接続できません。\n';
					msg += 'お手数ですが\n';
					msg += '['
					msg += document.getElementById('btn_index_goto_order').textContent; 
					msg += ']\n';
					msg += 'におすすみください。';
					alert(msg);
					return;
				}
				
				// 選択アイテムのチェック
				if(!IsSelectItem())return;
				if(!IsHaveUUID())return;
				
				// 選択中のItemのUUIDを設定する。
				document.getElementById('itemuuid').textContent = GetSelected_Item().uuid;
				Set_itemUUid(GetSelected_Item().uuid);
				console.log(`uuid_try_item = ${GetSelected_Item().uuid}`);

				// Googleにイベント送信
				const item_no = GetSelected_Item().designID;
				gtag('event', 'retryon_tshirt', {'event_category': item_no,'label_1': '','value': '1'});
				// すぐにTryOn
				Reuse_Avatar_TryOnProc();
			}
			// 写真撮影のTryOn
			function click_PictureTryOn() {
				// 未撮影時は終わる
				if(!get_isTakePicture())
				{
					alert(
						"[撮影]ボタンをおしてください。\n"
						 + 
						"撮影後、試着ができます。"
						);
					return;
				}
				// ライトOff
				fromHTML_Light_Off();
				// Googleにイベント送信
				const item_no = GetSelected_Item().designID;
				gtag('event', 'tryon_tshirt', {'event_category': item_no,'label_2': '','value': '1'});
				// TryOn
				btnimg_click_save();
			}
			//------------------------
			// カメラページのプライバシーポリシー
			// [すすむ]
			//------------------------
			function camera_accept_click() {
				// カメラの表示
				document.getElementById('camera-page').classList.remove('loaded');
				
				//------------------------------------
				// カメラの開始
				// カメラ起動の速さのため、アイテムを選んだ時に開始。
				//------------------------------------
				// const video = document.querySelector("#camera");
				// syncCamera(video);
			}
			//------------------------
			// 注文ページの
			// [印刷]
			//------------------------
			function getPrintData()
      {
				// **********
				// タイムアウト
				countReset();
				// **********
        // サイズを取得する
        const el_size = document.getElementsByName('size');

        let input_size = '';
        let isOK = false;
        for( let i=0; i<el_size.length;i++)
        {
          if(el_size[i].checked)
          {
            input_size =el_size[i].value;
            isOK = true;
            break;
          }
        }
        if(!isOK)
        {
          alert("サイズをえらんでください");
		  return;
        }
        console.log(input_size);
        call_print(input_size);
				// Googleにイベント送信
				const item_no = GetSelected_Item().designID;
				gtag('event', 'print_tshirt', {'event_category': item_no,'event_label': '','value': '1'});
      }
			// **********************
			// 各ページ共通の処理
			// **********************
			// 終了処理
			function endproc() {
				// **********
				// タイムアウト完了
				countStop();
				// **********
				// ライトOFF
				fromHTML_Light_Off();
				// 現在のItem・Avatarをクリアする。
				Set_itemUUid('');
	      Set_avatarUUid('');

				// 写真撮影フラグをクリア
				clear_isTakePicture();
				clear_isTakeItemPicture();
				
				// カメラの停止
				stopCamera_ItemCreate();
				// androidに送信
				call_exit();
			}
			// 終了処理(orderでの)
			function endproc_order() {
				endproc();
				// indexに戻る
				jumpto_index();
			}

			// **********************
			// アイテム画像撮影の遷移
			// **********************
			// アイテム画像の撮影を開始します。
			function itemPict_Start() {
				// カメラ映像の非表示
				document.getElementById("camera-itemcreate").classList.remove("item-hide");
				document.getElementById("overlay-Target").classList.remove("item-hide");
				// アイテム画像結果の表示
				document.getElementById("resultItemPict").classList.add("item-hide");

				// ボタンの演出
				document.getElementById("btn_ItemCreate").classList.add("fluffy_slime");
				document.getElementById("btn_ItemCreate_toCamera").classList.remove("fluffy_slime");
			}
			// アイテム画像の撮影結果を表示します。
			function itemPict_Result() {
				// カメラ映像の非表示
				document.getElementById("camera-itemcreate").classList.add("item-hide");
				document.getElementById("overlay-Target").classList.add("item-hide");
				// アイテム画像結果の表示
				document.getElementById("resultItemPict").classList.remove("item-hide");

				// ボタンの演出
				document.getElementById("btn_ItemCreate").classList.remove("fluffy_slime");
				document.getElementById("btn_ItemCreate_toCamera").classList.add("fluffy_slime");
				
			}
			// **********************
			// 各ページ要素の表示非表示
			// **********************
			// index.htmlの表示
			function show_index() {
				itemPict_Start();
				// ライトOff
				fromHTML_Light_Off();
				// 対象ページを開く
				document.getElementById('item-create-page').classList.remove('loaded');
			}
			// index.htmlの非表示
			function hide_index() {
				// 要素の消し込み
				document.getElementById('item-create-page').classList.add('loaded');
			}
			// camera.indexの表示
			function show_camera() {

				// カメラの開始
				const video = document.querySelector("#camera");
		    syncCamera(video);
				// ライトOn
				fromHTML_Light_On();
				// 対象ページを開く
				// document.getElementById('modal').classList.remove('hidden');
				// document.getElementById('mask').classList.remove('hidden');
				document.getElementById('btn_image_shutter').classList.add('fluffy_slime');
				document.getElementById('btn_image_save').classList.remove('fluffy_slime');
			}
			// camera.indexの非表示
			function hide_camera() {
				// 要素の消し込み
		    document.getElementById('camera_result').classList.add('loaded');
				document.getElementById('camera-page').classList.add('loaded');
				// カメラのアニメーションを止める
				document.getElementById('btn_image_shutter').classList.remove('fluffy_slime');
				document.getElementById('btn_image_save').classList.remove('fluffy_slime');
			}
			// order.htmlの表示
			function show_order() {
				document.getElementById('order-page').classList.remove('loaded');
			}
			// order.htmlの非表示
			function hide_order() {
				document.getElementById('order-page').classList.add('loaded');
			}
			// **********************
			// デバッグ出力
			function debugConsole_proc(message)
			{
				console.log(`[index.html]PROC :${message}`);
			}
		</script>
  </body>
</html>