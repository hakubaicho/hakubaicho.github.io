<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8">
		<!-- 
			幅:1080に固定する
			ほかにいいアイデアったらお願いします。
		-->
		<meta name="viewport" content="width=1080,initial-scale=1">
		<title>アイテム選択画面</title>
		
		<!-- Index.html -->
		<link rel="stylesheet" href="css/styles.css">
		<link rel="stylesheet" href="css/select_item.css">
		<link rel="stylesheet" href="css/accordion_check.css">
		<link rel="stylesheet" href="css/accordion_radio.css">
		<!-- Camera.html -->
		<link rel="stylesheet" href="css/camara.css">
		<link rel="stylesheet" href="css/talkstyle.css">
		<!-- Order.html -->
		<link rel="stylesheet" href="css/order.css">
		
  </head>
  <body>

		<!-- ******************************************************************************* -->
		<!-- index.html -->
		<!-- ******************************************************************************* -->
		<!-- index-loading画面 -->
    <div id="index-loading">
			<!-- カメラ -->
			<div class="footer-container_loading_camera">
				<img class="fluffy_slime" src="img/logos/button_loading_camera.webp" id="accept_privacy_button" onclick="accept_privacy_and_start()">
			</div>
			<!-- レシート -->
			<div class="footer-container_loading_receipt">
				<img class="fluffy_slime" src="img/logos/button_loading_receipt.webp" id="accept_privacy_button" onclick="accept_privacy_and_start()">
			</div>
			<!-- 同意してスタート -->
			<div class="footer-container_loading_start">
				<img class="fluffy_slime" src="img/logos/button_loading_start.webp" id="accept_privacy_button" onclick="accept_privacy_and_start()">
			</div>
			<!-- 終了 -->
			<div class="footer-container_loading_cancel">
				<img class="fluffy_slime" src="img/logos/button_loading_cancel.webp" id="cancel_privacy_button" onclick="endproc_order()">
			</div>
		</div>
			
    <!-- indexのメイン部分 -->
    <div id="index-page" class="loaded">
			<!-- HEADER -->
			<header>
				<div class="header-container">
					<!-- <p>header</p> -->
					<!-- 画像の表示　選択されたデザイン -->
					<div class="header_box">
						<img id="thumbnail_selected" class="item-hide">
					</div>
					<div class="header_box">
						<img id="thumbnail_selected_tryon" class="item-hide">
					</div>
					<div class="header_box header_box_last item-hide" id="detail-box">
						<div class="item_detail_container">
							<table class="detailtable">
								<tr>
									<td class="detail_column_title"><span class="cell_title"></span></td>
									<td class="detail_column_data"><span class="cell_data  weight_middle" id="item_detail_designID"></span></td>
								</tr>
								<tr>
									<td class="detail_column_title"><span class="cell_title"></span></td>
									<td class="detail_column_data"><span class="cell_data weight_small" id="item_detail_tag1"></span></td>
								</tr>
								<tr>
									<td class="detail_column_title"><span class="cell_title"></span></td>
									<td class="detail_column_data"><span class="cell_data weight_small" id="item_detail_tag2"></span></td>
								</tr>
								<tr>
									<td class="detail_column_title"><span class="cell_title"></span></td>
									<td class="detail_column_data"><span class="cell_data weight_small" id="item_detail_tag3"></span></td>
								</tr>
								<tr>
									<td class="detail_column_title"><span class="cell_title"></span></td>
									<td class="detail_column_data"><span class="cell_data weight_large" id="item_detail_name"></span></td>
								</tr>
							</table>
						</div>
					</div>
					<!-- 画像の表示　選択されたデザインの人が試着しているもの -->
				</div>
			</header>
			
			<!-- NAV -->
			<nav>
				<div class="nav-container">
					<div class="button_category button_tag1" id="button_category_tag1"><span id="category_tag1">大分類</span></div>
					<div class="button_category button_tag2" id="button_category_tag2"><span id="category_tag2">中分類</span></div>
					<div class="button_category button_tag3" id="button_category_tag3"><span id="category_tag3">小分類</span></div>
				</div>
			</nav>
			
			<!-- MAIN-AREA -->
			<div class="main-area-container">
				<!-- MAIN -->
				<main>
					<!-- Itemの詳細を表示する -->
					<div class="main-container">
						<div class="item_list_container" id="scroll_selecter">
							<!-- スクロールリセット要素 -->
							<div id="topPos"></div>
							<!-- 画像のリスト -->
							<ul class="thumbnails">
							</ul>
						</div>
					</div>
				</main>
				<!-- ASEIDE -->
				<aside>
					<!-- カテゴリーを表示する -->
					<div class="aside-container">
						<div id="accordionbox" class="category_list_container"></div>
					</div>
				</aside>
			</div>
				
			<!-- FOOTER -->
			<footer>
				<!-- <p>footer</p> -->
				<div class="footer-container">
					<!-- <button class="button_command" onclick="gotoCamera()">撮影して試着</button> -->
					<button id="reuseAvatar" class="button_command item-hide" onclick="click_noPictureTryOn()">前回の写真から</button>
					<button class="button_command" onclick="jumpto_Camera()">撮影して試着</button>
					<button class="button_command" id="btn_index_goto_order" onclick="jumpto_Order()">撮影せずに購入</button>
				</div>
				<div class="footer-command-area">
					<button hidden class="button_warning" onclick="setCategoryListTree_checkbox()">チェックボックス</button>
					<button hidden class="button_warning" onclick="setCategoryListTree_radiobutton()">ラジオ</button>
					<button class="button_caution" onclick="endproc()">終 了</button>
				</div>
			</footer>
		</div>
		
		<!-- ******************************************************************************* -->
		<!-- camera.html -->
		<!-- ******************************************************************************* -->
		<!-- 写真の登録・トライオン中のローディング画面 -->
		<div id="camera-tryon" class="loaded">
			<!-- タイトル -->
			<p>Status : <span id="title_logo">Tシャツを作ってみる！</span></p>
			<!-- くるくる -->
			<!-- <div class="spinner"></div> -->
			<!-- 吹き出しでフェーズ -->
			<div class="tryonheader">

			</div>
			<div class="area_talk">
				<ul class="messages">
					<!-- 1番目 -->
					<li class="left_side">
						<div class="pic">
							<!-- <img id="logo_moving_1" src="img/c1_character_pc.gif"> -->
							<img id="logo_1" src="img/logos/c1_character.gif">
							<img id="logo_moving_1" class="hidden_image" src="img/logos/c1_character.gif">
							<img id="logo_stop_1" class="hidden_image" src="img/logos/c1_character_greet.webp">
						</div>
						<div id="phase_1" class="message_conatainer">
							<img id="message_1">
							<img id="message_moving_1" class="hidden_image" src="img/logos/message01_start.webp">
							<img id="message_stop_1" class="hidden_image" src="img/logos/message01_end.webp">
						</div>
					</li>
					<!-- 2番目 -->
					<li class="right_side">
						<div class="pic">
							<!-- <img class="loading_icon_gif loading_icon_left" src="img/c2_character_pc.gif"> -->
							<img id="logo_2" src="img/logos/c2_character.gif">
							<img id="logo_moving_2" class="hidden_image" src="img/logos/c2_character.gif">
							<img id="logo_stop_2" class="hidden_image" src="img/logos/c2_character_greet.webp">
						</div>
						<div id="phase_2" class="message_conatainer">
							<img id="message_2">
							<img id="message_moving_2" class="hidden_image" src="img/logos/message02_start.webp">
							<img id="message_stop_2" class="hidden_image" src="img/logos/message02_end.webp">
						</div>
					</li>
					<!-- 3番目 -->
					<li class="left_side">
						<div class="pic">
							<!-- <img id="logo_moving_3" src="img/c3_character_pc.gif"> -->
							<img id="logo_3" src="img/logos/c3_character.gif">
							<img id="logo_moving_3" class="hidden_image" src="img/logos/c3_character.gif">
							<img id="logo_stop_3" class="hidden_image" src="img/logos/c3_character_greet.webp">
						</div>
						<div id="phase_3" class="message_conatainer">
							<img id="message_3">
							<img id="message_moving_3" class="hidden_image" src="img/logos/message03_start.webp">
							<img id="message_stop_3" class="hidden_image" src="img/logos/message03_end.webp">
						</div>
					</li>
					<!-- 4番目 -->
					<li class="right_side">
						<div class="pic">
							<!-- <img id="logo_moving_4" src="img/c4_character_pc.gif"> -->
							<img id="logo_4" src="img/logos/c4_character.gif">
							<img id="logo_moving_4" class="hidden_image" src="img/logos/c4_character.gif">
							<img id="logo_stop_4" class="hidden_image" src="img/logos/c4_character_greet.webp">
						</div>
						<div id="phase_4" class="message_conatainer">
							<img id="message_4">
							<img id="message_moving_4" class="hidden_image" src="img/logos/message04_start.webp">
							<img id="message_stop_4" class="hidden_image" src="img/logos/message04_end.webp">
						</div>
					</li>
					<!-- おわり -->
				</ul>
			</div>
		</div>
   
    
		<!-- カメラ撮影結果表示 -->
		<div id="camera_result" class="loaded">
			<!-- 画像の表示エリア -->
			<div id="camera_result_header">
				<!-- TryOnの結果画像 -->
				<img id="tryon_result_picture">
			</div>
			<!-- ボタンエリア -->
			<div  id="camera_result_footer">
				<div class="footer-container">
					<button class="button_command" onclick="jumpto_index()">選びなおす</button>
					<button class="button_command fluffy" onclick="jumpto_Order()">購入</button>
				</div>
			</div>
		</div>
		<!-- cameraのメイン部分 -->
		<div id="camera-page" class="loaded">
			<!-- HEADER -->
			<!-- NAV -->
			<!-- MAIN -->
			<main>
				<!-- カメラ -->
				<div id="area-capture" class="area-container">
					<div id="video_container">
						<!-- VIDEOの映像 -->
						<video id="camera" autoplay="1">
							<p>動画の再生に対応していません</p>
						</video>
						<!-- チャプチャーした画像 -->
						<canvas id="canvas-photo"></canvas>
					</div>
				</div>
			</main>
			
			
			<!-- FOOTER -->
			<footer>
				<!-- コントロールボタン -->
				<div id="area-button" class="area-container">
					<div class="box_command">
						<!-- <img src="img/arrow_left.png" id="btn_image_back" onclick="btnimg_click_back()"> -->
						<img src="img/logos/arrow_left.webp" id="btn_image_back" onclick="jumpto_index()">
					</div>
					<div class="box_command">
						<img class="fluffy" src="img/logos/shutter.webp" id="btn_image_shutter" onclick="btnimg_click_shutter()">
					</div>
					<div class="box_command">
						<img src="img/logos/arrow_right.webp" id="btn_image_save" onclick="btnimg_click_save()">
					</div>
				</div>
				<div hidden>
					<p>
						<span id="camera-status"></span>
					</p>
					<p>
						<span id="Forma_status"></span>
					</p>
					<p>
						<span id="forma_login"></span>
					</p>
					<p>itemUUID: 
						<span id="itemuuid"></span>
					</p>
					<p>avatarUUID: 
						<span id="avataruuid"></span>
					</p>
				</div>
				<!-- 音声 -->
				<div id="area-sound" class="area-container" hidden>
					<p>
						<button type=button onclick="play_countdown()">テスト再生</button>
						<span>再生状態:<span id="soundStatus"></span></span>
					</p>
					<!-- 
						audioタグで先読みしておいたほうがいいです。
						じゃないとエラーが出ました。
						controlsでコントロールGUIの表示をします。
					-->
					<audio id="sound-countdown" controls src="sound/countdown5to1.mp3"></audio>
					<audio id="sound-shutter" controls src="sound/shutter.mp3"></audio>
				</div>
				<!-- カメラコントロール -->
				<div id="area-camera-ctrl" class="area-container" hidden>
					<!-- 解像度の設定ボタン -->
					<div>
						<button type="button" class="button_command" onclick="videoSize(1024, 576)">H:1024 * W:576</button>
						<button type="button" class="button_command" onclick="videoSize(576, 1024)">H:576 * W:1024</button>
					</div>
					<!-- VIDEO選択画面 -->
					<div>
						<select id="camera_list" size="1" style="width:160pt;">
							<option>(video)</option>
						</select>
						<button id="start_video_button" class="button_command" onclick="startSelectedVideo()">Start Video</button>
					</div>
					<p>H:<span id="resolution-height"></span></p>
					<p>W:<span id="resolution-width"></span></p>
					<div id="camera-devices">
						<p>mediaDevicesを列挙します。</p>
						<button type="button" onclick="getCameraDevices()">取得</button>
						<div id="list-camera-devices">
						</div>
					</div>
				</div>
			</footer>
		</div>

		<!-- ******************************************************************************* -->
		<!-- order.html -->
		<!-- ******************************************************************************* -->
		<div id="order-page" class="loaded">
			<!-- HEADER -->
			<header>
				<div class="header-container"></div>
			</header>
			
			<!-- NAV -->
			<nav>
				<div class="nav-container">
					<div class="order_title">
						<span>購入画面</span>
					</div>
				</div>
			</nav>
			<!-- MAIN-AREA -->
			<div class="main-area-container">
				<!-- MAIN -->
				<main>
					<div class="main-container">
						
						<!-- 注文確認エリア -->
						<div class="order_container">
							<!-- デザイン -->
							<div class="order_design_container">
								<img id="order_design_image">
							</div>
							<!-- 注文詳細 -->
							<div class="order_detail_container">
								<div class="order_detail_data_container">
									
									<!-- デザイン番号 -->
									<p class="design_id weight_small" id="order_DesignID"></p>
									<!-- デザイン名称 -->
									<p class="design_id weight_large" id="order_DesignName"></p>
									<!-- 価格 -->
									<p class="design_id weight_large">￥ <span id="ItemPrice">2,189</span></p>
									<!-- サイズ選択 -->
									<table class="design_id">
										<tr>
											<td>
												<span class="size-category">Ledies</span>
											</td>
											<td>
												<label><input type="radio" name="size" value="Ladies) M"><span class="size-caption">M</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Ladies) L"><span class="size-caption">L</span></label>
											</td>
										</tr>
										<tr>
											<td>
												<span class="size-category">Mens</span>
											</td>
											<td>
												<label><input type="radio" name="size" value="Mens) M"><span class="size-caption">M</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Mens) L"><span class="size-caption">L</span></label>
											</td>
										</tr>
										<tr>
											<td>
												<span class="size-category">Kids</span>
											</td>
											<!-- 2021/04/23 サイズ展開なし -->
											<!-- <td>
												<label><input type="radio" name="size" value="Kids) 80"><span class="size-caption">80</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 90"><span class="size-caption">90</span></label>
											</td> -->
											<td>
												<label><input type="radio" name="size" value="Kids) 100"><span class="size-caption">100</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 110"><span class="size-caption">110</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 120"><span class="size-caption">120</span></label>
											</td>
											<td>
												<label><input type="radio" name="size" value="Kids) 130"><span class="size-caption">130</span></label>
											</td>
										</tr>
									</table>
								</div>
							</div>
						</div>
					</div>
				</main>
			</div>
			<!-- FOOTER -->
			<footer>
				<div class="footer-container">
					<button class="button_command" type=button onclick="jumpto_index()">選びなおす</button>
					<button class="button_command fluffy" type=button onclick="getPrintData()">印刷</button>
				</div>
				<div class="footer-command-area">
					<button class="button_caution" type=button onclick="endproc_order()">終 了</button>
				</div>
			</footer>
		</div>

		<!-- タイムアウトのスクリプト -->
		<script>
			// この時間経過したら終了
			const COUNT_MAX = 60;	//2021/0423

			let count = 0;
			let flagExit = false;
			//
			// タイマーを任意の数値にします。
			//
			function countSet(value)
			{
				count = value;
			}
			//
			// タイマーをリセットします。
			//
			function countReset() {
				count = 0;
			}
			//
			// タイマーを中止します。
			//
			function countStop() {
				console.log('タイムアウトを中止しました');
				flagExit = true;
			}
			//
			// タイマーを開始します。
			//
			function countStart() {
				console.log('タイムアウト処理を開始しました');
				flagExit = false;
				countUp();
			}
			const countUp = () => {
				console.log(count++);
				// 指定時間経過で終了
				if(COUNT_MAX < count)
				{
					console.log('タイムアウトで終了しました');
					endproc_order();
					return;
				}
				if(flagExit)
				{
					return;
				}
				setTimeout(countUp, 1000);
			}
			// http://alphasis.info/2013/09/javascript-dom-event-onscroll/
			// セレクタのスクロール検出
			const elem_scroll_selecter = document.getElementById('scroll_selecter')
			elem_scroll_selecter.onscroll = function()
			{
				// **********
				// タイムアウト
				countReset();
				// **********
			}
			// カテゴリのスクロール検出
			const elem_scroll_category = document.getElementById('accordionbox')
			elem_scroll_category.onscroll = function()
			{
				// **********
				// タイムアウト
				countReset();
				// **********
			}
		</script>
		<script type="text/javascript" src="js/selecter.js" charset="utf-8"></script>
		<script type="text/javascript" src="js/connect.js" charset="utf-8"></script>
		<script type="text/javascript" src="js/camera.js" charset="utf-8"></script>
		<script type="text/javascript" src="js/forma.js" charset="utf-8"></script>
		<script>
			// **********************
			// ページロード時の処理
			// **********************
			window.onload = function() {
				debugConsole_proc('window.onload()');
				
				// index-Loadingを閉じる
				// 2021/04/26 同意してスタートに変更しました
				// const index_loading = document.getElementById('index-loading');
				// index_loading.classList.add('loaded');
				
				// 初期処理
				index_onloaded();
				camera_onloaded();

				jumpto_index();
				// **********
		    // タイムアウト開始
				countStart();
    		// **********
				// 「同意してスタート」ボタンを表示
				document.getElementById('accept_privacy_button').classList.remove('item-hide');
			}
			 
			// ======================
			// 初期処理
			// ======================
			// [同意して開始]が押された
			function accept_privacy_and_start()
			{
				debugConsole_proc('accept privacy');
				// index-Loadingを閉じる
				const index_loading = document.getElementById('index-loading');
				index_loading.classList.add('loaded');
				// **********
				// タイムアウト
				countReset();
				// **********
			}
			// index.htmlがロードされた時の処理
			function index_onloaded() {
				debugConsole_proc('index_onloaded()');

				//------------------------------
				// ロード時の処理
				//------------------------------
				try
				{
						console.log('fromHTML_call_Loaded_pageindex');
						let obj =  fromHTML_call_Loaded_pageindex();
						let msg = '';
						for(let i=0;i<obj.length;i++)
						{
								msg += obj[i] + '\t';
						}
				}
				catch(e)
				{
						
				}
			}
			// camera.htmlがロードされた時の処理
			function camera_onloaded() {
				debugConsole_proc('camera_onloaded()');
        // カメラの初期化
        jsCameraStart();

				//------------------------------
        // Formaにログインする。
        // htmlからもできるように　user pass コード内
				//------------------------------
        try
        {
          let obj = fromHTML_call_Loaded_pagecamera();
        	LogIn(obj[0], obj[1]);
        }
        catch(e)
        {
          console.log(e);
        }
      };
		
			// **********************
			// ページ間の移動
			// **********************
			//------------------------
			// メインページ(セレクタ)に遷移する。
			// index.html
			//------------------------
			function jumpto_index() {
				// **********
				// タイムアウト
				countReset();
				// **********
				debugConsole_proc('jumpto_index()');
				// 消し込み
				hide_camera();
				hide_order();
				// カメラの停止
				// stopCamera();
				// Avatarが存在すれば、前回の写真からを有効にする
				document.getElementById('avataruuid').textContent = Get_avatarUUid();
				if(Get_avatarUUid() != '')
				{
					document.getElementById('reuseAvatar').classList.remove('item-hide');
				}
				else
				{
					document.getElementById('reuseAvatar').classList.add('item-hide');
				}
				// 表示
				show_index();
			}
			//------------------------
			// カメラページに遷移する。
			// camera.html
			//------------------------
			function jumpto_Camera() {
				// **********
				// タイムアウト
				countReset();
				// **********
				debugConsole_proc('jumpto_Camera()');
				
				// Formaに接続できていない場合の処理
				if(!Get_logInStatus())
				{
					let msg = '試着サーバーに接続できません。\n';
					msg += 'お手数ですが\n';
					msg += '['
					msg += document.getElementById('btn_index_goto_order').textContent; 
					msg += ']\n';
					msg += 'におすすみください。';
					alert(msg);
					return;
				}
				
				// 選択アイテムのチェック
				if(!IsSelectItem())return;
				if(!IsHaveUUID())return;
				
				// 選択中のItemのUUIDを設定する。
				document.getElementById('itemuuid').textContent = GetSelected_Item().uuid;
				Set_itemUUid(GetSelected_Item().uuid);
				console.log(`uuid_try_item = ${GetSelected_Item().uuid}`);
				
				// Avatarが存在すれば、前回の写真からを有効にする
				document.getElementById('avataruuid').textContent = Get_avatarUUid();
				if(Get_avatarUUid() != '')
				{
					document.getElementById('reuseAvatar').classList.remove('item-hide');
				}
				else
				{
					document.getElementById('reuseAvatar').classList.add('item-hide');
				}
				
				hide_index();
				show_camera();
				camera_accept_click();
			}
			//------------------------
			// 注文ページに遷移する。
			// order.html
			//------------------------
			function jumpto_Order() {
				// **********
				// タイムアウト
				countReset();
				// **********
				debugConsole_proc('jumpto_Order()');
				// 選択アイテムのチェック
				if(!IsSelectItem())return;
				
				// 選択中のアイテムを反映
				document.getElementById('order_design_image').src = GetSelected_Item().designsrc;
				document.getElementById('order_DesignID').textContent = GetSelected_Item().designID;
				document.getElementById('order_DesignName').textContent = GetSelected_Item().itemName;


				let num = 0;
				try {
					num = Number(GetSelected_Item().price);
				}
				catch {

				}
				document.getElementById('ItemPrice').textContent = num.toLocaleString();
				// ほかのページを消し込む
				hide_index();
				hide_camera();
				// カメラの停止
				// stopCamera();
				
				// 対象ページを開く
				show_order();
			}
			
			// **********************
			// ページ内遷移
			// **********************
			// アバターの再利用
			function click_noPictureTryOn() {
			 
				// Formaに接続できていない場合の処理
				if(!Get_logInStatus())
				{
					let msg = '試着サーバーに接続できません。\n';
					msg += 'お手数ですが\n';
					msg += '['
					msg += document.getElementById('btn_index_goto_order').textContent; 
					msg += ']\n';
					msg += 'におすすみください。';
					alert(msg);
					return;
				}
				
				// 選択アイテムのチェック
				if(!IsSelectItem())return;
				if(!IsHaveUUID())return;
				
				// 選択中のItemのUUIDを設定する。
				document.getElementById('itemuuid').textContent = GetSelected_Item().uuid;
				Set_itemUUid(GetSelected_Item().uuid);
				console.log(`uuid_try_item = ${GetSelected_Item().uuid}`);

				// すぐにTryOn
				Reuse_Avatar_TryOnProc();
			}
			//------------------------
			// カメラページのプライバシーポリシー
			// [すすむ]
			//------------------------
			function camera_accept_click() {
				// カメラの表示
				document.getElementById('camera-page').classList.remove('loaded');
				
				//------------------------------------
				// カメラの開始
				// カメラ起動の速さのため、アイテムを選んだ時に開始。
				//------------------------------------
				// const video = document.querySelector("#camera");
				// syncCamera(video);
			}
			//------------------------
			// 注文ページの
			// [印刷]
			//------------------------
			function getPrintData()
      {
				// **********
				// タイムアウト
				countReset();
				// **********
        // サイズを取得する
        const el_size = document.getElementsByName('size');

        let input_size = '';
        let isOK = false;
        for( let i=0; i<el_size.length;i++)
        {
          if(el_size[i].checked)
          {
            input_size =el_size[i].value;
            isOK = true;
            break;
          }
        }
        if(!isOK)
        {
          alert("サイズをえらんでください");
		  return;
        }
        console.log(input_size);
        call_print(input_size);
      }
			// **********************
			// 各ページ共通の処理
			// **********************
			// 終了処理
			function endproc() {
				// **********
				// タイムアウト完了
				countStop();
				// **********
				// 現在のItem・Avatarをクリアする。
				Set_itemUUid('');
	      Set_avatarUUid('');

				// 表示の初期化
				clear_selectitem();
				// setCategoryListTree_radiobutton();
				setCategoryListTree_checkbox();
				setItemListTree(['','','']);

				// Avatarが存在すれば、前回の写真からを有効にする
				document.getElementById('avataruuid').textContent = Get_avatarUUid();
				if(Get_avatarUUid() != '')
				{
					document.getElementById('reuseAvatar').classList.remove('item-hide');
				}
				else
				{
					document.getElementById('reuseAvatar').classList.add('item-hide');
				}
				// カメラの停止
				stopCamera();
				// androidに送信
				call_exit();
			}
			// 終了処理(orderでの)
			function endproc_order() {
				endproc();
				// indexに戻る
				jumpto_index();
			}
			
			// **********************
			// 各ページ要素の表示非表示
			// **********************
			// index.htmlの表示
			function show_index() {
				// 対象ページを開く
				document.getElementById('index-page').classList.remove('loaded');
			}
			// index.htmlの非表示
			function hide_index() {
				// 要素の消し込み
				document.getElementById('index-page').classList.add('loaded');
			}
			// camera.indexの表示
			function show_camera() {
				// 対象ページを開く
				// document.getElementById('modal').classList.remove('hidden');
				// document.getElementById('mask').classList.remove('hidden');
				document.getElementById('btn_image_shutter').classList.add('fluffy');
				document.getElementById('btn_image_save').classList.remove('fluffy');
			}
			// camera.indexの非表示
			function hide_camera() {
				// 要素の消し込み
		    document.getElementById('camera_result').classList.add('loaded');
				document.getElementById('camera-page').classList.add('loaded');

				document.getElementById('btn_image_shutter').classList.remove('fluffy');
				document.getElementById('btn_image_save').classList.remove('fluffy');
			}
			// order.htmlの表示
			function show_order() {
				document.getElementById('order-page').classList.remove('loaded');
			}
			// order.htmlの非表示
			function hide_order() {
				document.getElementById('order-page').classList.add('loaded');
			}
			// **********************
			// デバッグ出力
			function debugConsole_proc(message)
			{
				console.log(`[index.html]PROC :${message}`);
			}
		</script>
  </body>
</html>