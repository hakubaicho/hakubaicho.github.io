<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>TSV</title>
  </head>
  <body>
    <form name="myform">
        <input name="myfile" type="file" />
        <textarea name="output" cols="80" rows="10"></textarea>
				<button onclick="getCSV()">CSVread</button>
				<textarea name="output-tsv"></textarea>
    </form>

		<script src="js/tsv.js"></script>
    <script>
			//Form要素を取得する
    	var form = document.forms.myform;
    
    	//ファイルが読み込まれた時の処理
    	form.myfile.addEventListener('change', function(e) {
      
        //ここにファイル取得処理を書く
        //--------------------------------------
        //読み込んだファイル情報を取得
        //--------------------------------------
        var resultinfo = e.target.files;
        console.log( resultinfo );
        //--------------------------------------
        //--------------------------------------
        var resultfile = e.target.files[0];
				//FileReaderのインスタンスを作成する
				var reader = new FileReader();
  
				//読み込んだファイルの中身を取得する
				reader.readAsText( resultfile );

				//ファイルの中身を取得後に処理を行う
				reader.addEventListener( 'load', function() {
	    	  //ファイルの中身をtextarea内に表示する
  	    	form.output.textContent = reader.result; 
					
					//CSVを1行ずつ読み込む
					const lines = reader.result.split('\n');
			    console.log(lines);
					for(let i = 0; i < lines.length; i++)
					{
						const columns = lines[i].split('\t');
						console.log(columns);
					}
  			})

    	})
		</script>
  </body>
</html>