<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- 
    スライドショー
    -ゆっくりズームアウトさせながら全画面で見せる-
    https://coco-factory.jp/ugokuweb/move01/6-1-3/ 
  -->
  <meta charset="utf-8">
  <title>スライドショー</title>
  <!-- <meta name="viewport" content="width=device-width,initial-scale=1.0"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="stylesheet" href="css/styles.css" />
  <!--自作のJS-->
  <script src="js/images.js"></script>
  <script src="js/terops.js"></script>
</head>

<body>

  <!-- サイネージコンテナ -->
  <div class="signage-container">
    <!-- 画像スライドショーコンテナ -->
    <div class="signage-slideshow-area">
      <img src="img/halloween_card00.jpg" id="pics">
    </div>
    <!-- テロップコンテナ -->
    <div class="signage-terop-area">
      <div class="terop-container">
        <div class="terop-container-top">
          <p id="terops">
            実業家の堀江貴文氏（48）らが福岡県北九州市に設立し、来季から独立リーグ「ヤマエ久野九州アジアリーグ」へ参入する新球団「福岡北九州フェニックス」は17日、ロッテ、ツインズ、阪神で活躍した西岡剛氏（37）が選手兼任監督に、ジョニー・セリス氏（34）がヘッドコーチに就任することを発表した。
            【写真】ロッテ時代、コーンロウの髪形の 西岡剛氏
            西岡氏は球団を通じて「この度、福岡北九州フェニックスの監督に就任することになりました。九州に身を置いて野球に携われることをうれしく思います。野球というスポーツを通じてたくさんの方と出会い野球の楽しさをお届けできるように頑張ります。よろしくお願い申し上げます」とコメントした。将来的には世界進出も視野に入れる新球団の初代監督として、選手兼任で九州の地を盛り上げる。
          </p>
        </div>
        <div class="terop-container-bottom">
          <p id="status-of-api">未取得</p>
        </div>
      </div>
    </div>
  </div>
  <!-- <button id="playButton" onclick="playSlidedeshow();">PLAY</button> -->

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script>
    // APIのURL
    const endpoint = "https://script.google.com/macros/s/AKfycbyarYp4dlnCKKilnOJ1wLwCE6XuftXD9M89fvMxAdQ3QdFqoz7P5G8HiZJr1Yfb4eJFeA/exec";
    function inputToGoogleAPI(isStart) {
      document.getElementById('status-of-api').textContent = "データ取得中";
      $.ajax({
        type: 'GET',
        url: endpoint,
        dataType: 'jsonp',
        // dataType: 'json',
        data: {
          text: 'Hi,There!'
          // text: inputvalue
        }
      })
        .done(function (out) {
          const terops = out.terop;
          const images = out.image;

          reloadPicture(images);
          reloadTerop(terops);
          // データ取得の結果
          let todayDate = new Date();
          let strDate = "";
          strDate += `${todayDate.getFullYear()}/${todayDate.getMonth() + 1}/${todayDate.getDay()}`;
          strDate += " ";
          strDate += `${todayDate.getHours()}:${todayDate.getMinutes()}:${todayDate.getMinutes()}`;
          document.getElementById('status-of-api').textContent = `データ取得完了:${strDate}`;
        })
        .fail(function (err) {
          document.getElementById('status-of-api').textContent = `エラーが起きました:${err}`;
          // alert("エラーが起きました");
        })
        .always(function () {
          console.log("Ajax処理終了");
        });

      if (isStart) {
        playSlidedeshow();
        playTerop();
      };
    }

    window.onload = () => {
      inputToGoogleAPI(true);
    };
    const countUp = () => {
      inputToGoogleAPI(false);
    }
    setInterval(countUp, 60000);
  </script>
</body>

</html>